<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Avocado Predictor</title>
<style>
  html, body {
    margin: 0; padding: 0; height: 100%;
    font-family: Arial, sans-serif;
    background: #f0f7f2;
  }
  body {
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 20px;
  }
  .container {
    background: #d8f0d3;
    border-radius: 15px;
    padding: 30px 40px;
    width: 100%;
    max-width: 700px; /* wider for 3 columns */
    box-sizing: border-box;
    box-shadow: 0 8px 20px rgba(0,100,0,0.2);
  }
  h2 {
    text-align: center;
    color: #2e6b2e;
    margin-bottom: 25px;
    font-size: 28px;
  }
  h2::before {
    content: "ðŸ¥‘ ";
    font-size: 32px;
    vertical-align: middle;
  }

  form {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 20px 25px; /* row gap 20px, column gap 25px */
    align-items: start;
  }

  /* Style labels and inputs to take full width of their grid cell */
  label {
    display: block;
    font-weight: 600;
    color: #2f4f2f;
    margin-bottom: 6px;
  }
  select, input {
    width: 100%;
    padding: 10px 12px;
    font-size: 16px;
    border-radius: 10px;
    border: 2px solid #a7cfa3;
    box-sizing: border-box;
    transition: border-color 0.3s ease;
  }
  select:focus, input:focus {
    border-color: #4caf50;
    outline: none;
    box-shadow: 0 0 8px #4caf50aa;
  }

  /* Make the submit button span all columns */
  button {
    grid-column: 1 / -1; /* span all 3 columns */
    margin-top: 20px;
    padding: 14px 0;
    font-size: 20px;
    background-color: #4caf50;
    color: #fff;
    border: none;
    border-radius: 12px;
    cursor: pointer;
    font-weight: 700;
  }
  button:hover {
    background-color: #3b8e3b;
  }

  .prediction {
    margin-top: 30px;
    padding: 18px;
    background: #c3e6a4;
    color: #2e6b2e;
    font-weight: 700;
    border-radius: 12px;
    text-align: center;
    font-size: 18px;
  }
  .error {
    margin-top: 30px;
    padding: 14px;
    background: #f6b2b2;
    color: #a63030;
    font-weight: 700;
    border-radius: 12px;
    text-align: center;
    font-size: 16px;
  }
</style>
</head>
<body>
  <div class="container">
    <h2>Avocado Project - Predict Type and Average Price</h2>
    <form method="POST">
      <!-- Region dropdown takes one cell -->
      <div>
        <label for="region">Select Region:</label>
        <select name="region" id="region" required>
          {% for reg in regions %}
            <option value="{{ reg }}">{{ reg }}</option>
          {% endfor %}
        </select>
      </div>

      <!-- Numeric inputs and selects with PLU descriptions -->
      {% set plu_names = {
          '4046': '4046 (Small Hass Avocados)',
          '4225': '4225 (Medium Hass Avocados)',
          '4770': '4770 (Large Hass Avocados)'
      } %}
      {% for feature in numeric_features %}
        <div>
        {% if feature == 'year' %}
          <label for="year">Year:</label>
          <select name="year" id="year" required>
            {% for y in range(2015, 2026) %}
              <option value="{{ y }}">{{ y }}</option>
            {% endfor %}
          </select>
        {% elif feature == 'month' %}
          <label for="month">Month:</label>
          <select name="month" id="month" required>
            {% for m in range(1, 13) %}
              <option value="{{ m }}">{{ m }}</option>
            {% endfor %}
          </select>
        {% elif feature == 'day' %}
          <label for="day">Day:</label>
          <select name="day" id="day" required>
            {% for d in range(1, 32) %}
              <option value="{{ d }}">{{ d }}</option>
            {% endfor %}
          </select>
        {% else %}
          <label for="{{ feature }}">
            {{ plu_names[feature] if feature in plu_names else feature }}:
          </label>
          <input type="number" step="any" name="{{ feature }}" id="{{ feature }}" required />
        {% endif %}
        </div>
      {% endfor %}

      <button type="submit">Predict</button>
    </form>

    {% if prediction_type and prediction_price %}
      <div class="prediction" role="alert" aria-live="polite">
        Predicted Avocado Type: <strong>{{ prediction_type }}</strong><br />
        Predicted Average Price: <strong>${{ "%.2f"|format(prediction_price) }}</strong>
      </div>
    {% endif %}

    {% if error %}
      <div class="error" role="alert" aria-live="assertive">{{ error }}</div>
    {% endif %}
  </div>
</body>
</html>
